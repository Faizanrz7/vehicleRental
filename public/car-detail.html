<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Car Details</title>
    <!-- <link
      rel="stylesheet"
      href="/css/car-detail.css"
      type="tex
    /css
    " -->
    <!-- /> -->
  </head>

  <body>
    <link href="/css/car-detail.css" rel="stylesheet" type="text/css" />
    <header>
      <h1>Car Details</h1>
    </header>
    <div class="container">
      <div class="slideshow-container"></div>
      <div class="details"></div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script>
      let slideIndex = 0;

      function showSlides() {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        let dots = document.getElementsByClassName("dot");
        for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {
          slideIndex = 1;
        }
        for (i = 0; i < dots.length; i++) {
          dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].className += " active";
        setTimeout(showSlides, 2000); // Change image every 2 seconds
      }

      function getCurrentURL() {
        return window.location.href;
      }

      // Example
      const url = getCurrentURL();
      console.log(url.substring(url.lastIndexOf("/") + 1));
      let carId = url.substring(url.lastIndexOf("/") + 1);

      window.onload = async function () {
        let carDetails = await fetch(`/cars/carD/${carId}`);
        carDetails = await carDetails.json();
        // console.log("Car", carDetails);
        createDesign(carDetails);
        showSlides();
      };

      function createDesign(carDetail) {
        let div = "";
        let img = "";

        img +=
          `<div class="mySlides fade">
          <div class="numbertext">1/3</div>
          <img
            src="` +
          carDetail.images[0] +
          `"
            style="width: 100%"
          />
        </div>
        <div class="mySlides fade">
          <div class="numbertext">2/3</div>
          <img
            src="` +
          carDetail.images[1] +
          `"
            style="width: 100%"
          />
        </div>
        <div class="mySlides fade">
          <div class="numbertext">3/3</div>
          <img
            src="` +
          carDetail.images[2] +
          `"
            style="width: 100%"
          />
        </div>
        <div style="text-align: center">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>`;
        $(".slideshow-container").html(img);

        div =
          `<h2>Car Model: ` +
          carDetail.Name +
          `</h2>
        <p>
          ` +
          carDetail.Description +
          `
        </p>

        <div class="features-row">
          <div class="car-features">
            <div class="rows">
              <span
                class="car-feature-symbol"
                style="
                  background-image: url('https://img.icons8.com/?size=512&id=llzTPfNay9yW&format=png');
                "
              ></span>
              <p class="car-feature-text">` +
          carDetail.Seats +
          ` Seats</p>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <span
                class="car-feature-symbol"
                style="
                  background-image: url('https://img.icons8.com/?size=512&id=12776&format=png');
                "
              ></span>
              <p class="car-feature-text">` +
          carDetail.Date +
          `</p>
            </div>
            <br />
            <div class="rows">
              <span
                class="car-feature-symbol"
                style="
                  background-image: url('https://img.icons8.com/?size=512&id=gMJ4LEwCLDgi&format=png');
                "
              ></span>
              <p class="car-feature-text">AC</p>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <span
                class="car-feature-symbol"
                style="
                  background-image: url('https://img.icons8.com/?size=512&id=ltQtrH63i0Uf&format=png');
                "
              ></span>
              <p class="car-feature-text">` +
          carDetail.Mileage +
          `</p>
            </div>
            <br />
            <div class="rows">
              <span
                class="car-feature-symbol"
                style="
                  background-image: url('https://img.icons8.com/dotty/80/000000/gas-pump.png ');
                "
              ></span>
              <p class="car-feature-text">Petrol</p>
            </div>
          </div>
          <!-- https://cdn1.vectorstock.com/i/1000x1000/82/20/car-vehicle-with-driver-isolated-icon-vector-19078220.jpg -->
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

          <div class="car-features" style="padding-top: 0px">
            <div class="rows" style="padding-top: 0px">
              <h3>Cost per day</h3>
            </div>
            <!-- <div class="rows">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p>With Driver:- ` +
          carDetail.priceD +
          `</p>
          </div>
          <div class="rows">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p>Without Driver:- ` +
          carDetail.price +
          `</p>
          </div> -->
            <div class="rows">
              <span
                class="car-feature-symbol"
                style="
                  background-image: url('https://cdn1.vectorstock.com/i/1000x1000/82/20/car-vehicle-with-driver-isolated-icon-vector-19078220.jpg ');
                "
              ></span>
              <p class="car-feature-text">With Driver:- ` +
          carDetail.Price +
          `</p>
            </div>
            <div class="rows">
              <span
                class="car-feature-symbol"
                style="
                  background-image: url('https://p7.hiclipart.com/preview/768/421/187/car-computer-icons-sedan-auto-detailing-auto-vector.jpg ');
                "
              ></span>
              <p class="car-feature-text">Without Driver:- ` +
          carDetail.Price +
          `</p>
            </div>
          </div>
        </div>`;

        $(".details").html(div);
      }
    </script>
  </body>
</html>
